# How I Use Lunr.js for Search on My Site

When building a blog or website, having a fast and efficient search feature is essential for helping users find the content they need. For my site, I chose [Lunr.js](https://lunrjs.com/), a lightweight and powerful JavaScript library for full-text search. In this article, I'll walk you through how I implemented Lunr.js to power the search functionality on my site.

## Why Lunr.js?

Lunr.js is a client-side search library that allows you to add search capabilities without needing a server-side backend. It’s perfect for static sites like mine because:

- It’s fast and lightweight.
- It doesn’t require a database or server.
- It supports full-text search with features like tokenization, stemming, and ranking.

## Setting Up Lunr.js

To get started, I added Lunr.js to my project. You can include it via a CDN or install it using npm. For my site, I used the CDN approach:

```html
<script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js"></script>
```

## Creating the Search Index

Lunr.js works by creating an index of your content. For my blog, I generate a JSON file containing metadata for all my posts, such as titles, URLs, and summaries. Here’s an example of what the JSON file looks like:

```json
[
  {
    "id": "1",
    "title": "Introduction to Lunr.js",
    "url": "/posts/introduction-to-lunrjs",
    "content": "Lunr.js is a powerful search library for static sites..."
  },
  {
    "id": "2",
    "title": "Building a Static Site with Jekyll",
    "url": "/posts/building-a-static-site-with-jekyll",
    "content": "Jekyll is a popular static site generator..."
  }
]
```

I generate this file automatically whenever I build my site.

## Initializing Lunr.js

Once the JSON file is ready, I load it in my JavaScript and use Lunr.js to create the search index:

```javascript
// Load the JSON file
fetch('/search-index.json')
  .then(response => response.json())
  .then(data => {
    // Create the Lunr.js index
    const idx = lunr(function () {
      this.ref('id');
      this.field('title');
      this.field('content');

      data.forEach(doc => {
        this.add(doc);
      });
    });

    // Handle search queries
    const searchInput = document.getElementById('search-input');
    const resultsContainer = document.getElementById('search-results');

    searchInput.addEventListener('input', () => {
      const query = searchInput.value;
      const results = idx.search(query);

      // Display results
      resultsContainer.innerHTML = results.map(result => {
        const item = data.find(doc => doc.id === result.ref);
        return `<li><a href="${item.url}">${item.title}</a></li>`;
      }).join('');
    });
  });
```

## Adding the Search UI

To make the search feature user-friendly, I added a simple search bar and results container to my site:

```html
<input type="text" id="search-input" placeholder="Search..." />
<ul id="search-results"></ul>
```

With this setup, users can type in the search bar, and the results will update in real-time.

## Conclusion

Lunr.js is an excellent choice for adding search functionality to static sites. It’s fast, easy to set up, and doesn’t require a backend. By generating a JSON index of my blog posts and using Lunr.js to search through it, I’ve created a seamless search experience for my readers.

If you’re building a static site and need search functionality, I highly recommend giving Lunr.js a try!

Let me know in the comments if you have any questions or need help setting it up on your site.